(this["webpackJsonpjumbo-hooks"]=this["webpackJsonpjumbo-hooks"]||[]).push([[61],{1367:function(e,a,t){"use strict";t.r(a);var n=t(63),c=t(64),r=t(66),i=t(65),l=t(0),s=t.n(l),o=t(480),m=t(3),d=t(857),u=function(e){Object(r.a)(t,e);var a=Object(i.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"app-wrapper"},s.a.createElement(o.a,{match:this.props.match,title:s.a.createElement(m.a,{id:"sidebar.taskmanager.mytasks"})}),s.a.createElement(d.a,{task:this.props.location.state?this.props.location.state.task:null}))}}]),t}(s.a.Component);a.default=u},480:function(e,a,t){"use strict";var n=t(0),c=t.n(n),r=t(529),i=t(530),l=function(e,a,t){return 0===t?"/":"/"+e.split(a)[0]+a};a.a=function(e){var a=e.title,t=e.match,n=e.project_name,s=e.room_number,o=[],m=t.url.substr(1),d=m.split("/");return d.map((function(e,a){""===e&&d.splice(a,1),"live"===d[a-1]?o[a]=n||"":"live"===d[a-2]?o[a]=s||"":o[a]=e})),c.a.createElement("div",{className:"page-heading d-sm-flex justify-content-sm-between align-items-sm-center"},c.a.createElement("h2",{className:"title mb-3 mb-sm-0"},a),c.a.createElement(r.a,{className:"mb-0",tag:"nav"},d.map((function(e,a){if(0!=a)return c.a.createElement(i.a,{active:d.length===a+1,tag:d.length===a+1?"span":"a",key:a,href:l(m,e,a)},function(e){var a=e.split("-");return a.length>1?a[0].charAt(0).toUpperCase()+a[0].slice(1)+" "+a[1].charAt(0).toUpperCase()+a[1].slice(1):e.charAt(0).toUpperCase()+e.slice(1)}(o[a]))}))))}},857:function(e,a,t){"use strict";var n=t(9),c=t(123),r=t(11),i=t(0),l=t.n(i),s=t(14),o=t(470),m=t(445),d=t(404),u=[{id:1,handle:"starred",title:"Starred",icon:"star"},{id:2,handle:"Priority",title:"Snagging",icon:"info"},{id:3,handle:"Todo",title:"Todo",icon:"calendar"},{id:4,handle:"Done",title:"Done",icon:"check"}],p=t(568),f=t(891),g=t(469),b=t(29),E=Object(p.b)((function(e){var a=e.Task,t=e.onTaskSelect,c=e.onTaskChecked,r=e.onMarkAsStart,s=Object(i.useState)("1"==a.favourite),o=Object(n.a)(s,2),m=o[0],u=o[1],p=Object(i.useState)("1"==a.archived),E=Object(n.a)(p,2),v=E[0],h=E[1];return l.a.createElement("div",{className:"module-list-item ".concat(a.is_require?"bg-grey":"")},l.a.createElement("div",{className:"module-list-icon"},l.a.createElement(f.a,{color:"primary",checked:"1"==a.archived,onClick:function(e){a.archived="1"==a.archived?"0":"1",h(!v),c(a)},value:"SelectTask"}),l.a.createElement(d.a,{className:"icon-btn",onClick:function(){a.favourite="1"==a.favourite?"0":"1",r(a,a.favourite),u(!m)}},"1"==a.favourite?l.a.createElement("i",{className:"zmdi zmdi-star text-warning"}):l.a.createElement("i",{className:"zmdi zmdi-star-outline text-warning"}))),l.a.createElement("div",{className:"module-list-info mr-2",onClick:function(){t(a)}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"module-todo-content col-8 col-sm-6 col-md-6"},l.a.createElement("div",{className:"subject ".concat("1"==a.archived&&"text-muted text-strikethrough")},a.task),l.a.createElement("div",{className:"manage-margin"},l.a.createElement("div",{className:"badge text-white bg-light-blue darken-2"},a.company_name),l.a.createElement("div",{className:"badge text-white bg-green darken-1"},a.project_name),l.a.createElement("div",{className:"badge text-white bg-primary darken-1"},a.room_number))),l.a.createElement("div",{className:"module-todo-right col-4 col-sm-5 col-md-6"},l.a.createElement("div",{className:"d-flex flex-row-reverse text-right"},l.a.createElement(g.a,{alt:a.profile_pic,src:b.c+"upload/img/"+a.profile_pic}),a.assign_users.map((function(e){return l.a.createElement(g.a,{key:e.id,className:"mr-2",alt:e.profile_pic,src:b.c+"upload/img/"+e.profile_pic})})))))))})),v=t(80),h=Object(p.a)((function(e){var a=e.Tasks,t=e.onTaskSelect,n=e.onTaskChecked,c=e.onMarkAsStart,r=e.width;return l.a.createElement("div",{className:"module-list"},l.a.createElement(v.a,{className:"module-list-scroll scrollbar",style:{height:r>=1200?"calc(100vh - 259px)":"calc(100vh - 238px)"}},a.filter((function(e){return"0"==e.archived})).length>0&&l.a.createElement("div",{className:"module-list-item bg-info text-white"},l.a.createElement("div",{className:"module-list-icon"},l.a.createElement("h2",{className:"my-0"},"To Do"))),a.filter((function(e){return"0"==e.archived})).map((function(e,a){return l.a.createElement(E,{key:a,index:a,Task:e,onTaskSelect:t,onMarkAsStart:c,onTaskChecked:n})})),a.filter((function(e){return"1"==e.archived})).length>0&&l.a.createElement("div",{className:"module-list-item bg-success text-white"},l.a.createElement("div",{className:"module-list-icon"},l.a.createElement("h2",{className:"my-0"},"Completed"))),a.filter((function(e){return"1"==e.archived})).map((function(e,a){return l.a.createElement(E,{key:a,index:a,Task:e,onTaskSelect:t,onMarkAsStart:c,onTaskChecked:n})}))))})),N=t(32),k=t.n(N),x=t(105),_=t(437),j=t(252),y=t(448),O=t(184),S=t.n(O),w=function(e){var a=e.conversation;return l.a.createElement("div",{className:"d-flex module-detail-item"},l.a.createElement("div",{className:"chat-todo-avatar"},l.a.createElement("img",{className:"rounded-circle avatar size-40",src:"".concat(b.c,"upload/img/").concat(a.profile_pic),alt:"..."})),l.a.createElement("div",{className:"chat-toto-info"},l.a.createElement("div",{className:"d-flex  flex-column"},l.a.createElement("div",{className:"name mr-2"},"".concat(a.first_name," ").concat(a.last_name)),l.a.createElement("div",{className:"time text-muted"},S()(a.created_at).format("ddd DD, YYYY, hh:mm:ss A"))),l.a.createElement("div",{className:"message"},a.comment)),l.a.createElement("div",{className:"jr-featured-content-right"},a.attach_file?l.a.createElement("a",{href:"".concat(b.c,"upload/file/").concat(a.attach_file)},l.a.createElement(d.a,{className:"icon-btn text-success"},l.a.createElement("i",{className:"zmdi zmdi-file"}))):l.a.createElement("div",null)))},C=t(446),z=t(408),T=t.n(z),I=t(50),M=t(490),D=t.n(M),B=t(499),F=t.n(B),A=t(447),L=t(27),P=function(e){var a=e.users,t=e.Task,c=e.width,r=Object(i.useState)(!0),s=Object(n.a)(r,2),o=s[0],m=(s[1],Object(i.useState)(e.Task.comments)),u=Object(n.a)(m,2),p=u[0],f=u[1],E=Object(i.useState)(!1),h=Object(n.a)(E,2),N=(h[0],h[1]),O=Object(i.useState)(void 0),S=Object(n.a)(O,2),z=S[0],M=S[1],B=Object(i.useState)(!1),P=Object(n.a)(B,2),U=P[0],W=P[1],R=Object(i.useState)(!1),J=Object(n.a)(R,2),H=J[0],Y=J[1],q=Object(i.useState)(e.Task.description),G=Object(n.a)(q,2),V=G[0],K=G[1],Q=Object(i.useState)(e.Task.task),X=Object(n.a)(Q,2),Z=X[0],$=X[1],ee=Object(i.useState)(!1),ae=Object(n.a)(ee,2),te=ae[0],ne=ae[1],ce=Object(i.useState)(""),re=Object(n.a)(ce,2),ie=re[0],le=re[1],se=Object(i.useState)(t.created_by>0?a.find((function(e){return e.id==t.created_by})):null),oe=Object(n.a)(se,2),me=oe[0],de=oe[1],ue=JSON.parse(localStorage.getItem("user")),pe=Object(i.useState)("1"==t.favourite),fe=Object(n.a)(pe,2),ge=fe[0],be=fe[1],Ee=Object(i.useState)("1"==t.priority),ve=Object(n.a)(Ee,2),he=ve[0],Ne=ve[1],ke=Object(i.useState)("1"==t.archived),xe=Object(n.a)(ke,2),_e=xe[0],je=xe[1],ye=Object(i.useState)(null),Oe=Object(n.a)(ye,2),Se=Oe[0],we=Oe[1],Ce=Object(i.useState)(null),ze=Object(n.a)(Ce,2),Te=ze[0],Ie=ze[1],Me=Object(i.useState)(t.task_img?b.c+"upload/img/"+t.task_img:""),De=Object(n.a)(Me,2),Be=De[0],Fe=De[1],Ae=Object(i.useState)(!1),Le=Object(n.a)(Ae,2),Pe=Le[0],Ue=(Le[1],Object(L.g)());Object(i.useEffect)((function(){if(localStorage.getItem("pixie_room_id")){var e=localStorage.getItem("pixie_room_id"),a=localStorage.getItem("pixie_data");if(t.id==e){for(var n=a.split(","),c=n[0].match(/:(.*?);/)[1],r=atob(n[1]),i=r.length,l=new Uint8Array(i);i--;)l[i]=r.charCodeAt(i);var s=JSON.parse(localStorage.getItem("user")).id+"-"+(new Date).getTime()+"-pixie."+c.split("/").pop(),o=new File([l],s,{type:c}),m=new FormData;m.append("id",t.id),m.append("task_img",Te),b.a.post(b.b+"task/saveImage",m).then((function(e){(e.status="success")?I.NotificationManager.info("Task ".concat(t.task," is updated!")):"error"===e.data.status&&I.NotificationManager.error(e.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){I.NotificationManager.error(e,"Error!",1e3,(function(){}))})),Ie(o),Fe(URL.createObjectURL(o))}localStorage.removeItem("pixie_room_id"),localStorage.removeItem("pixie_id"),localStorage.removeItem("pixie_data")}}),[]);var We=function(){W(!1),N(!1)},Re=function(){H&&(t.task=Z,Ye(t)),Y(!H)},Je=function(){te&&(t.description=V,Ye(t)),ne(!te)},He=function(){if(""!==ie){var e=p.concat({first_name:ue.first_name,last_name:ue.last_name,profile_pic:ue.profile_pic,comment:ie,created_at:new Date,attach_file:Se});f(e);var a=new FormData;a.append("id",t.id),a.append("message",ie),a.append("file",Se),b.a.post("".concat(b.b,"task/commentSubmit"),a).then((function(e){"success"===e.data.status?(f(e.data.comments),we(null)):"error"===e.data.status&&I.NotificationManager.error(e.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){I.NotificationManager.error(e,"Error!",1e3,(function(){}))})),le("")}},Ye=function(e){var a=new FormData;a.append("id",e.id),a.append("company_id",e.company_id),a.append("project_id",e.project_id),a.append("room_id",e.room_id),a.append("task",e.task),a.append("description",e.description),a.append("due_by_date",e.due_by_date),a.append("task_img",e.task_img),a.append("priority",e.priority),a.append("created_by",e.created_by),b.a.post(b.b+"task/updateTask",a).then((function(a){"success"===a.data.status?I.NotificationManager.info("Task ".concat(e.task," is updated!")):I.NotificationManager.error(a.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){I.NotificationManager.error(e,"Error!",1e3,(function(){}))}))},qe=function(e){return new Promise((function(a){F.a.imageFileResizer(e,500,500,"JPEG",100,0,(function(e){a(e)}),"blob")}))},Ge=function(){var e=Object(x.a)(k.a.mark((function e(a){var t,n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.target.files[0],e.next=3,qe(t);case 3:n=e.sent,c=t.name,t=new File([n],c,n),Fe(URL.createObjectURL(t)),Ie(t);case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return o?l.a.createElement("div",{className:"module-detail module-list"},l.a.createElement(v.a,{className:"module-list-scroll scrollbar",style:{height:c>=1200?"calc(100vh - 335px)":"calc(100vh - 311px)"}},l.a.createElement("div",{className:"module-detail-item module-detail-header"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6 col-md-8 col-12"},l.a.createElement("div",{className:"d-flex align-items-center"},l.a.createElement("div",{className:"user-name mr-md-4 mr-2",onClick:function(e){W(!0),M(e.currentTarget)}},null===me?l.a.createElement("h4",{className:"mb-0 mouse pointer"},"Assign User "):l.a.createElement("div",{className:"d-flex align-items-center pointer"},l.a.createElement(g.a,{className:"mr-2",src:b.c+"upload/img/"+me.profile_pic,alt:me.first_name}),l.a.createElement("h4",{className:"mb-0"},me.first_name," ",me.last_name))))),l.a.createElement("div",{className:"col-sm-6 col-md-4 col-6"},l.a.createElement("div",{className:"d-flex flex-sm-row-reverse justify-content-between justify-content-sm-start"},l.a.createElement(j.a,{id:"label-menu",anchorEl:z,open:U,onClose:We,MenuListProps:{style:{width:180}}},a.map((function(e,a){return l.a.createElement(y.a,{key:a,value:e.id,onClick:function(){We(),t.created_by=e.id,Ye(t),de(e)}},l.a.createElement("div",{className:"d-flex user-name manage-margin align-items-center"},l.a.createElement(g.a,{src:b.c+"upload/img/"+e.profile_pic,alt:e.first_name}),l.a.createElement("h4",null,e.first_name," ",e.last_name)))}))),l.a.createElement(d.a,{className:"icon-btn",onClick:function(){t.favourite="1"==t.favourite?"0":"1",be(!ge),Ye(t)}},"1"==t.favourite?l.a.createElement("span",{className:"size-30 rounded-circle text-green border-green"},l.a.createElement("i",{className:"zmdi zmdi-star text-warning"})):l.a.createElement("span",{className:"size-30 rounded-circle text-green border-green"},l.a.createElement("i",{className:"zmdi zmdi-star-outline text-warning"}))),l.a.createElement(d.a,{className:"icon-btn",onClick:function(){t.priority="1"==t.priority?"0":"1",Ne(!he),Ye(t)}},"1"==t.priority?l.a.createElement("span",{className:"size-30 rounded-circle text-green border-green"},l.a.createElement("i",{className:"zmdi zmdi-info"})):l.a.createElement("span",{className:"size-30 rounded-circle text-green border-green"},l.a.createElement("i",{className:"zmdi zmdi-info-outline"}))),l.a.createElement(d.a,{className:"icon-btn",onClick:function(){t.archived="1"==t.archived?"0":"1",je(!_e),Ye(t)}},"1"==t.archived?l.a.createElement("span",{className:"border-2 size-30 rounded-circle text-green border-green"},l.a.createElement("i",{className:"zmdi zmdi-check"})):l.a.createElement("span",{className:"border-2 size-30 w-2 rounded-circle text-muted border-grey"},l.a.createElement("i",{className:"zmdi zmdi-check"}))))))),l.a.createElement("div",{className:"module-detail-item"},l.a.createElement("div",{className:"labels mb-4"},l.a.createElement("div",{className:"badge text-white badge-primary"},t.company_name),l.a.createElement("div",{className:"badge text-white badge-secondary"},t.project_name),l.a.createElement("div",{className:"badge text-white badge-danger"},t.building_name),l.a.createElement("div",{className:"badge text-white badge-warning"},t.floor_name),l.a.createElement("div",{className:"badge text-white badge-info"},t.room_number)),l.a.createElement("div",{className:"form-group d-flex align-items-center mb-0"},l.a.createElement(d.a,{className:"icon-btn p-1"},l.a.createElement("i",{className:"zmdi zmdi-menu"})),H?l.a.createElement("div",{className:"d-flex align-items-center w-100"},l.a.createElement("div",{className:"col"},l.a.createElement(_.a,{fullWidth:!0,multiline:!0,className:"task-title",id:"required",placeholder:"Title",onChange:function(e){return $(e.target.value)},defaultValue:Z})),l.a.createElement(d.a,{onClick:Re},l.a.createElement("i",{className:"zmdi zmdi-check"}))):l.a.createElement("div",{className:"d-flex align-items-center w-100"},l.a.createElement("div",{className:"task-title col"},Z),l.a.createElement(d.a,{className:"icon-btn",onClick:Re},l.a.createElement("i",{className:"zmdi zmdi-edit"}))))),l.a.createElement("div",{className:"module-detail-item mb-4"},te?l.a.createElement("div",{className:"d-flex align-items-center w-100"},l.a.createElement(_.a,{fullWidth:!0,id:"required",multiline:!0,placeholder:"Note",onChange:function(e){return K(e.target.value)},defaultValue:V}),l.a.createElement(d.a,{className:"icon-btn",onClick:Je},l.a.createElement("i",{className:"zmdi zmdi-check"}))):l.a.createElement("div",{className:"d-flex align-items-center w-100"},l.a.createElement("div",{className:"task-des col px-0",dangerouslySetInnerHTML:{__html:V?V.replace(/\n/g,"<br>"):""}}),l.a.createElement(d.a,{className:"icon-btn",onClick:Je},l.a.createElement("i",{className:"zmdi zmdi-edit"})))),l.a.createElement("div",{className:"bg-primary text-center w-100 mt-4 mb-4"},l.a.createElement("input",{type:"file",id:"upload_doc",accept:"image/*",name:"upload_doc",style:{display:"none"},onChange:function(e){Ge(e)}}),l.a.createElement(d.a,{className:"text-grey",variant:"contained",onClick:function(e){document.getElementById("upload_doc").click()}},l.a.createElement("i",{className:"zmdi zmdi-camera zmdi-hc-2x animated infinite pulse"}))),Be?l.a.createElement("div",{className:"col-12"},l.a.createElement("div",{className:"jr-card pb-2"},l.a.createElement("div",{className:"jr-card-thumb"},l.a.createElement("img",{className:"card-img-top img-fluid",alt:"products",src:Be})),l.a.createElement("div",{className:"jr-card-social text-center"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-xl-6 col-lg-6 col-md-6 col-6"},l.a.createElement(A.a,{className:"jr-fab-btn bg-light-blue accent-2 text-white",onClick:function(){return function(){var e=new FormData;e.append("id",t.id),e.append("task_img",Te),b.a.post(b.b+"task/saveImage",e).then((function(e){(e.status="success")?(localStorage.setItem("isFirst",0),Ue.push({pathname:"/app/project/sticker",state:{room_id:e.data.id,img_id:e.data.id,img_url:Be,img_file:Te}})):"error"===e.data.status&&I.NotificationManager.error(e.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){I.NotificationManager.error(e,"Error!",1e3,(function(){}))}))}()}},l.a.createElement("i",{className:"zmdi zmdi-puzzle-piece zmdi-hc-2x"}))),l.a.createElement("div",{className:"col-xl-6 col-lg-6 col-md-6 col-6"},l.a.createElement(A.a,{className:"jr-fab-btn bg-red accent-2 text-white",onClick:function(){Ie(null),Fe("")}},l.a.createElement("i",{className:"zmdi zmdi-delete zmdi-hc-2x"}))))))):null,l.a.createElement("div",{className:"module-detail-item"},l.a.createElement("h3",null,"Comments")),p.map((function(e,a){return l.a.createElement(w,{key:a,conversation:e})}))),l.a.createElement("div",{className:"chat-main-footer todo-main-footer"},l.a.createElement("div",{className:"d-flex flex-row align-items-center",style:{maxHeight:61}},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",{className:"border-0 form-control chat-textarea",id:"required",onKeyUp:function(e){"Enter"===e.key&&He()}.bind(void 0),onChange:function(e){le(e.target.value)}.bind(void 0),value:ie,rows:2,placeholder:"Type and hit enter to send message"}))),l.a.createElement("div",{className:"chat-sent"},l.a.createElement("input",{type:"file",id:"upload_doc",accept:"image/*",name:"upload_doc",style:{display:"none"},onChange:function(e){we(e.target.files[0])}}),l.a.createElement(d.a,{onClick:function(e){return document.getElementById("upload_doc").click()},"aria-label":"Send message",className:null==Se?"":"text-success"},l.a.createElement(T.a,null)),l.a.createElement(d.a,{onClick:function(){He()},"aria-label":"Send message"},l.a.createElement("i",{className:"zmdi  zmdi-mail-send"})))))):l.a.createElement("div",{className:"loader-view",style:{height:c>=1200?"calc(100vh - 259px)":"calc(100vh - 238px)"}},l.a.createElement(C.a,null),l.a.createElement(D.a,{show:Pe,warning:!0,confirmBtnText:"Go Back",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Warning!",onConfirm:function(){return Ue.go(-1)}},"Data not cached, so you can not view this page."),l.a.createElement(I.NotificationContainer,null))},U=t(3),W=t(467),R=t(556),J=t.n(R),H=t(255),Y=t(659),q=t(569),G=t(892),V=t(869),K=t(870),Q=t(175),X=t.n(Q),Z=t(677),$=t.n(Z),ee=t(894),ae=t(444),te=t(403),ne=t(968),ce=t(969),re=function(e){return{root:{width:"100%",height:"100%",zIndex:1,overflow:"hidden"},appFrame:{position:"relative",display:"flex",width:"100%",height:"100%"},appBar:{position:"absolute",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerPaper:{position:"relative",height:"100%",width:240},drawerHeader:Object(r.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:Object(c.a)({width:"100%",marginLeft:-240,flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginTop:56},e.breakpoints.up("sm"),{content:{height:"calc(100% - 64px)",marginTop:64}}),contentShift:{marginLeft:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}}};a.a=function(e){var a=JSON.parse(localStorage.getItem("user")),t=e.projectId,c=e.roomId,r=e.customerId,p=e.room,f=e.task,g=e.panelOpen,E=e.end_enable,N=Object(i.useState)(""),k=Object(n.a)(N,2),x=(k[0],k[1],Object(i.useState)(!1)),_=Object(n.a)(x,2),O=_[0],S=_[1],w=Object(i.useState)([]),z=Object(n.a)(w,2),T=z[0],M=z[1],B=Object(i.useState)([]),F=Object(n.a)(B,2),A=F[0],R=F[1],Q=Object(i.useState)([]),Z=Object(n.a)(Q,2),ie=Z[0],le=Z[1],se=Object(i.useState)([]),oe=Object(n.a)(se,2),me=oe[0],de=oe[1],ue=Object(i.useState)([]),pe=Object(n.a)(ue,2),fe=pe[0],ge=pe[1],be=Object(i.useState)(0),Ee=Object(n.a)(be,2),ve=Ee[0],he=Ee[1],Ne=Object(i.useState)(0),ke=Object(n.a)(Ne,2),xe=ke[0],_e=ke[1],je=Object(i.useState)(0),ye=Object(n.a)(je,2),Oe=ye[0],Se=ye[1],we=Object(i.useState)(""),Ce=Object(n.a)(we,2),ze=Ce[0],Te=Ce[1],Ie=Object(i.useState)(1),Me=Object(n.a)(Ie,2),De=Me[0],Be=Me[1],Fe=Object(s.e)((function(e){return e.settings})).width,Ae=Object(i.useState)(!1),Le=Object(n.a)(Ae,2),Pe=Le[0],Ue=Le[1],We=Object(i.useState)(f||null),Re=Object(n.a)(We,2),Je=Re[0],He=Re[1],Ye=Object(i.useState)(!1),qe=Object(n.a)(Ye,2),Ge=qe[0],Ve=qe[1],Ke=Object(i.useState)(!1),Qe=Object(n.a)(Ke,2),Xe=Qe[0],Ze=Qe[1],$e=Object(i.useState)(""),ea=Object(n.a)($e,2),aa=ea[0],ta=ea[1];Object(i.useEffect)((function(){ca()}),[]);var na=Object(L.g)(),ca=function(){b.a.get(b.b+"task/taskList",{params:{project_id:t,room_id:c,customer_id:r}}).then((function(e){M(e.data.tasks),ra(ze,ve,xe,Oe,e.data.tasks),le(e.data.users),de(e.data.customers),ge(e.data.projects),_e(e.data.customerId),Se(t),S(!0)})).catch((function(e){Ve(!0)}))},ra=function(e,a,t,n){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T;void 0==e&&(e=""),void 0==a&&(a=0),void 0==t&&(t=0),void 0==n&&(n=0),Be(e||a||t||n?0:1),R(c.filter((function(c){return(""===e||1===e&&"1"===c.favourite||2===e&&"1"===c.priority||3===e&&"1"!==c.archived||4===e&&"1"===c.archived)&&(0==a&&c.created_by>0||a>0&&c.created_by==a)&&(0==t&&c.company_id>0||t>0&&c.company_id==t)&&(0==n&&c.project_id>0||n>0&&c.project_id==n)})))},ia=function(e){Se(e),ra(ze,ve,xe,e)},la={data:A,headers:[{label:"Task Id",key:"id"},{label:"Task Title",key:"task"},{label:"Task Description",key:"description"},{label:"Customer",key:"company_name"},{label:"Site",key:"site_name"},{label:"Room Number",key:"room_number"},{label:"Assign to",key:"assign_to"},{label:"Comments(Number)",key:"comment_number"},{label:"Comment1",key:"comment1"},{label:"Comment1_date",key:"comment1_date"},{label:"Comment1_user",key:"comment1_user"},{label:"Comment2",key:"comment2"},{label:"Comment2_date",key:"comment2_date"},{label:"Comment2_user",key:"comment2_user"},{label:"Comment3",key:"comment3"},{label:"Comment3_date",key:"comment3_date"},{label:"Comment3_user",key:"comment3_user"}],filename:"Task_export.csv"},sa=function(){Ze(!1)},oa=function(e){return l.a.createElement("div",{className:"module-side ".concat(re.drawerPaper)},e?l.a.createElement("div",{className:"module-side-header"},l.a.createElement("div",{className:"module-logo"},l.a.createElement($.a,{className:"mr-2"}),l.a.createElement("span",null,l.a.createElement(U.a,{id:"sidebar.taskmanager.mytasks"})))):null,l.a.createElement(q.CSVLink,Object.assign({id:"exportTasks"},la,{style:{display:"none"}}),"Export to CSV"),l.a.createElement("div",{className:"module-side-content ".concat(re.drawerInner)},l.a.createElement(v.a,{className:"module-side-scroll scrollbar",style:{height:Fe>=1200?"calc(100vh - 200px)":"calc(100vh - 80px)"}},l.a.createElement("div",{className:"module-add-task"},l.a.createElement(m.a,{variant:"contained",color:"primary",className:"btn btn-primary btn-block mr-0",onClick:function(){sa(),6!=a.user_type||"0"!=E?na.push({pathname:"/app/task-manager/add-new",state:{room_id:c,project_id:Oe,customer_id:xe}}):I.NotificationManager.error("You can't add new task!","Error!",1e3,(function(){}))}},"New Task"),l.a.createElement(m.a,{variant:"contained",color:"primary",className:"btn btn-primary btn-block",onClick:function(e){!function(e){Ze(!0),ta(e.currentTarget)}(e)}},"Actions"),l.a.createElement(j.a,{id:"Task-menu",open:Xe,anchorEl:aa,onClose:function(){sa()}},l.a.createElement(y.a,{onClick:function(){sa(),function(){var e=a.is_upload>=0?a.is_upload:1,t=a.front_cover,n=a.back_cover,c=new Y.a("p","pt","letter"),r=c.internal.pageSize.getWidth(),i=c.internal.pageSize.getHeight(),l=200,s=(l=200,new Image),o="";e&&t&&(s.src=b.c+"upload/img/"+t,c.addImage(s,"png",0,0,r,i),c.setFontSize(30),c.text("Scope of works:",250,l),p&&(s.src=b.c+"upload/img/"+p.logo_img,o=p.logo_img.split(".").pop(),c.addImage(s,o,250,l+30,200,130),l+=200,c.setFontSize(12),c.text("Client: ",250,l),c.text(p.company_name+"",350,l),c.text("Project Title: ",250,l+30),c.text(p.project_name+"",350,l+30),c.text("Room Number: ",250,l+60),c.text(p.room_number+"",350,l+60),c.text("Sirvey Date: ",250,l+90),c.text(p.survey_start_date+"",350,l+90),c.text("site Name: ",250,l+120),c.text(p.site_name+"",350,l+120)),c.addPage()),l=80,c.setFontSize(30),c.text("Task List ",250,l),l+=50,c.setFontSize(13),c.text("-   Tasks",50,l),l+=30,c.setFontSize(11),c.text("No",70,l),c.text("Task",r/6,l),c.text("Description",r/2,l),l+=20;var m=0;A.map((function(e,a){l+20*(a-m)>i-100&&(c.addPage(),l=80,m=a),c.text(a+1+"",70,l+20*(a-m)),c.text(e.task+"",r/6,l+20*(a-m)),c.text(e.description+"",r/2,l+20*(a-m))})),e&&n&&(c.addPage(),s.src=b.c+"upload/img/"+n,c.addImage(s,"png",0,0,r,i)),c.save("TaskList.pdf")}()}},"Print"),l.a.createElement(y.a,{onClick:function(){sa(),document.getElementById("exportTasks").click()}},"Export"))),l.a.createElement(ee.a,null),l.a.createElement(ae.a,{className:re.list},l.a.createElement(te.a,{className:"module-nav-label"},l.a.createElement(W.a,{id:"user",select:!0,label:"User",value:ve,onChange:function(e){return a=e.target.value,he(a),void ra(ze,a,xe,Oe);var a},margin:"normal",fullWidth:!0},l.a.createElement(y.a,{value:0},l.a.createElement(U.a,{id:"Task.all"})),ie.map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.first_name)})))),t?null:r?l.a.createElement(te.a,{className:"module-nav-label"},l.a.createElement(W.a,{id:"project",select:!0,label:"Project",value:Oe,onChange:function(e){return ia(e.target.value)},margin:"normal",fullWidth:!0},l.a.createElement(y.a,{value:0},l.a.createElement(U.a,{id:"Task.all"})),fe.map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.project_name)})))):l.a.createElement("div",null,l.a.createElement(te.a,{className:"module-nav-label"},l.a.createElement(W.a,{id:"customer",select:!0,label:"Customer",value:xe,onChange:function(e){return a=e.target.value,_e(a),void ra(ze,ve,a,Oe);var a},margin:"normal",fullWidth:!0},l.a.createElement(y.a,{value:0},l.a.createElement(U.a,{id:"Task.all"})),me.map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement(te.a,{className:"module-nav-label"},l.a.createElement(W.a,{id:"project",select:!0,label:"Project",value:Oe,onChange:function(e){return ia(e.target.value)},margin:"normal",fullWidth:!0},l.a.createElement(y.a,{value:0},l.a.createElement(U.a,{id:"Task.all"})),fe.map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.project_name)}))))),l.a.createElement(te.a,{button:!0,className:"py-0",onClick:function(){R(T),he(0),_e(0),Se(0),Te(""),Be(1)}},l.a.createElement(ne.a,null,l.a.createElement(d.a,{className:"icon-btn ".concat(1===De?"text-primary":"")},l.a.createElement("i",{className:"zmdi zmdi-view-list zmdi-hc-fw"}))),l.a.createElement(ce.a,{primary:"All",className:"".concat(1===De?"text-primary":"")})),u.map((function(e,a){return l.a.createElement(te.a,{button:!0,className:"py-0",key:a,onClick:function(){Te(e.id),ra(e.id,ve,xe,Oe)}},l.a.createElement(ne.a,null,l.a.createElement(d.a,{className:"icon-btn ".concat(e.id===ze?"text-primary":"")},l.a.createElement("i",{className:"zmdi zmdi-".concat(e.icon)}))),l.a.createElement(ce.a,{primary:e.title,className:"".concat(e.id===ze?"text-primary":"")}))}))))))},ma=function(){Ue(!Pe)};return l.a.createElement(G.a,{defaultExpanded:null==t&&null==c||g},l.a.createElement(V.a,{className:"bg-primary",expandIcon:l.a.createElement(X.a,{className:"text-white size-30"}),onClick:function(e){return function(e){e.currentTarget.className.indexOf("expanded")>0?c?localStorage.setItem("room_task",!1):t&&localStorage.setItem("pro_task",!1):c?localStorage.setItem("room_task",!0):t&&localStorage.setItem("pro_task",!0)}(e)}},l.a.createElement("div",{className:"text-white d-flex align-items-center"},l.a.createElement(d.a,{"aria-label":"open drawer",onClick:function(e){return e.stopPropagation(),void ma()},className:"d-block d-xl-none d-lg-none"},l.a.createElement(J.a,{className:"text-white size-30"})),l.a.createElement(d.a,{className:"d-none d-xl-block d-lg-block"},l.a.createElement($.a,{className:"text-white size-30"})),l.a.createElement(H.a,{variant:"h6",color:"inherit",noWrap:!0,className:"text-white mb-0"},"Tasks -  ",A.length))),l.a.createElement(K.a,{className:"p-0"},l.a.createElement("div",{className:"app-wrapper"},l.a.createElement("div",{className:"animated slideInUpTiny animation-duration-3"},l.a.createElement("div",{className:"app-module"},l.a.createElement("div",{className:"d-block d-xl-none d-lg-none"},l.a.createElement(o.a,{open:Pe,onClose:ma},oa(1))),l.a.createElement("div",{className:"app-module-sidenav d-none d-xl-flex d-lg-flex"},oa(0)),l.a.createElement("div",{className:"module-box"},O?null===Je?l.a.createElement("div",{className:"module-box-content"},l.a.createElement("div",{className:"module-box-topbar d-flex align-items-center"},l.a.createElement(d.a,{className:"icon-btn"},l.a.createElement("i",{className:"zmdi zmdi-check"})),"".concat(A.filter((function(e){return"1"==e.archived})).length," of ").concat(A.length," number of Tasks have been completed.")),l.a.createElement(h,{Tasks:A,onMarkAsStart:function(e,a){var t=new FormData;t.append("id",e.id),t.append("favourite",a),b.a.post(b.b+"task/setFavourite",t).then((function(t){"success"===t.data.status?a?I.NotificationManager.info("Task ".concat(e.task," is set to favourite one!")):I.NotificationManager.info("Task ".concat(e.task," is released from favourite one!")):"error"===t.data.status&&I.NotificationManager.error(t.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){I.NotificationManager.error(e,"Error!",1e3,(function(){}))}))},width:Fe,onTaskSelect:function(e){He(e)},onTaskChecked:function(e){var a;a="1"===e.archived?1:0;var t=new FormData;t.append("id",e.id),t.append("archived",a),b.a.post(b.b+"task/setCompleted",t).then((function(t){"success"===t.data.status?(a?I.NotificationManager.info("Task ".concat(e.task," is completed!")):I.NotificationManager.info("Task ".concat(e.task," is not completed!")),ca()):"error"===t.data.status&&I.NotificationManager.error(t.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){I.NotificationManager.error(e,"Error!",1e3,(function(){}))}))},useDragHandle:!0})):l.a.createElement("div",{className:"module-box-content"},l.a.createElement("div",{className:"module-box-topbar d-flex align-items-center"},l.a.createElement(d.a,{className:"icon-btn",onClick:function(){He(null)}},l.a.createElement("i",{className:"zmdi zmdi-arrow-back"})),l.a.createElement("h2",{className:"mb-0"},"task: ".concat(Je.task))),l.a.createElement(P,{Task:Je,width:Fe,users:ie})):l.a.createElement("div",{className:"loader-view",style:{height:Fe>=1200?"calc(100vh - 259px)":"calc(100vh - 238px)"}},l.a.createElement(C.a,null)),l.a.createElement(D.a,{show:Ge,warning:!0,confirmBtnText:"Go Back",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Warning!",onConfirm:function(){return na.go(-1)}},"Data not cached, so you can not view this page.")))))),l.a.createElement(I.NotificationContainer,null))}}}]);
//# sourceMappingURL=61.a3d75db2.chunk.js.map