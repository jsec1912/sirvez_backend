(this["webpackJsonpjumbo-hooks"]=this["webpackJsonpjumbo-hooks"]||[]).push([[36],{466:function(e,a,t){"use strict";var n=t(0),l=t.n(n),c=t(482),r=t(483),i=function(e,a,t){return 0===t?"#/":"#/"+e.split(a)[0]+a};a.a=function(e){var a=e.title,t=e.match.path.substr(1),n=t.split("/");return l.a.createElement("div",{className:"page-heading d-sm-flex justify-content-sm-between align-items-sm-center"},l.a.createElement("h2",{className:"title mb-3 mb-sm-0"},a),l.a.createElement(c.a,{className:"mb-0",tag:"nav"},n.map((function(e,a){return l.a.createElement(r.a,{active:n.length===a+1,tag:n.length===a+1?"span":"a",key:a,href:i(t,e,a)},function(e){var a=e.split("-");return a.length>1?a[0].charAt(0).toUpperCase()+a[0].slice(1)+" "+a[1].charAt(0).toUpperCase()+a[1].slice(1):e.charAt(0).toUpperCase()+e.slice(1)}(e))}))))}},467:function(e,a,t){"use strict";var n=t(0),l=t.n(n),c=function(e){var a=e.heading,t=e.children,n=e.styleName,c=e.cardStyle,r=e.childrenStyle,i=e.headerOutside,m=e.headingStyle;return l.a.createElement("div",{className:"".concat(n)},i&&l.a.createElement("div",{className:"jr-entry-header"},l.a.createElement("h3",{className:"entry-heading"},a),t.length>1&&l.a.createElement("div",{className:"entry-description"},t[0])),l.a.createElement("div",{className:"jr-card ".concat(c)},!i&&a&&l.a.createElement("div",{className:"jr-card-header ".concat(m)},l.a.createElement("h3",{className:"card-heading"},a),t.length>1&&l.a.createElement("div",{className:"sub-heading"},t[0])),l.a.createElement("div",{className:"jr-card-body ".concat(r)},t.length>1?t[1]:t)))};a.a=c,c.defaultProps={cardStyle:"",headingStyle:"",childrenStyle:"",styleName:"col-lg-6 col-sm-12"}},468:function(e,a,t){"use strict";var n=t(35);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(t(0)),c=(0,n(t(149)).default)(l.default.createElement("path",{d:"M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"}),"PlaylistAdd");a.default=c},574:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(466),r=t(3),i=t(10),m=t(558),s=t(559),o=t(557),d=t(560),u=t(555),p=t(580),v=t(556),b=t(579),h=t(443),E=t(252),f=t(399),g=t(578),N=t(468),j=t.n(N),O=t(249),y=t(441),S=function(e){var a=Object(n.useState)(!1),t=Object(i.a)(a,2),c=t[0],r=t[1],m=Object(n.useState)(void 0),s=Object(i.a)(m,2),o=s[0],d=s[1],u=e.selectedData,p=e.onSelectRow,v=e.menu_rows,b=v||[{content:"Modify",id:1},{content:"Delete",id:2}],h=function(){r(!1)};return l.a.createElement("div",null,l.a.createElement(f.a,{onClick:function(e){r(!0),d(e.currentTarget)}},l.a.createElement("i",{className:"zmdi zmdi-more-vert"})),l.a.createElement(O.a,{anchorEl:o,open:c,onClose:h,key:u.id,MenuListProps:{style:{width:150,paddingTop:0,paddingBottom:0}}},b.map((function(e){return l.a.createElement(y.a,{key:u+"-"+e.content,onClick:function(){h(),p(u,e.id)}},e.content)}))))},C=t(53),P=t(15),_=t(26),k=t(440),w=t(99),x=t(577),D=t(563),M=t(484),A=t.n(M),T=t(458),z=t(439),L=t(74),W=[{id:"id",align:!1,disablePadding:!0,label:"ID"},{id:"customer_name",align:!0,disablePadding:!1,label:"Customer"},{id:"site_name",align:!0,disablePadding:!1,label:"Site"},{id:"department_name",align:!0,disablePadding:!1,label:"Department"},{id:"buildings_count",align:!0,disablePadding:!1,label:"Buildings"},{id:"floors_count",align:!0,disablePadding:!1,label:"Floors"},{id:"rooms_count",align:!0,disablePadding:!1,label:"Rooms"},{id:"actions",align:!0,disablePadding:!1,numeric:"right",label:"Actions"}],I=function(){var e=Object(n.useState)(!1),a=Object(i.a)(e,2),t=a[0],c=a[1],r=Object(n.useState)("asc"),N=Object(i.a)(r,2),O=N[0],M=N[1],I=Object(n.useState)("id"),R=Object(i.a)(I,2),U=R[0],H=R[1],B=Object(n.useState)(!1),F=Object(i.a)(B,2),J=F[0],V=F[1],Y=Object(P.e)((function(e){return e.settings})).width,q=Object(_.g)(),G=Object(n.useState)(0),K=Object(i.a)(G,2),Q=K[0],X=K[1],Z=Object(n.useState)(10),$=Object(i.a)(Z,2),ee=$[0],ae=$[1],te=Object(n.useState)([]),ne=Object(i.a)(te,2),le=ne[0],ce=ne[1],re=Object(n.useState)([]),ie=Object(i.a)(re,2),me=ie[0],se=ie[1],oe=Object(n.useState)(null),de=Object(i.a)(oe,2),ue=de[0],pe=de[1],ve=Object(n.useState)([]),be=Object(i.a)(ve,2),he=be[0],Ee=be[1],fe=Object(n.useState)([]),ge=Object(i.a)(fe,2),Ne=ge[0],je=ge[1],Oe=Object(n.useState)(null),ye=Object(i.a)(Oe,2),Se=ye[0],Ce=ye[1],Pe=Object(n.useState)(null),_e=Object(i.a)(Pe,2),ke=_e[0],we=_e[1],xe=Object(n.useState)(null),De=Object(i.a)(xe,2),Me=De[0],Ae=De[1],Te=Object(n.useState)(null),ze=Object(i.a)(Te,2),Le=ze[0],We=ze[1],Ie=Object(n.useState)(null),Re=Object(i.a)(Ie,2),Ue=Re[0],He=Re[1];Object(n.useEffect)((function(){Be()}),[]);var Be=function(){w.a.get(w.b+"department/departmentList").then((function(e){ce(e.data.departments),se(e.data.departments),V(!0)}))},Fe=function(e,a){var t;"desc"===(t=U===a&&"asc"===O?"desc":"asc")?me.sort((function(e,t){return t[a]<e[a]?-1:1})):me.sort((function(e,t){return e[a]<t[a]?-1:1})),M(t),H(a)},Je=function(e,a){0===a?q.push({pathname:"/app/sites/site",state:{id:e}}):1===a?Ve(e):2===a&&w.a.post(w.b+"department/deleteDepartment",{id:e}).then((function(e){Be(),L.NotificationManager.info("You removed selected user")}))},Ve=function(e){pe(e),w.a.get(w.b+"department/departmentInfo",{params:{id:e}}).then((function(a){console.log(a.data),Ee(a.data.customers),je(a.data.sites),e>0&&(Ce(a.data.department.company_id),we(a.data.department.site_id),Ae(a.data.department.department_name),We(a.data.department.colour),He(a.data.department.archive)),c(!0)}))},Ye=function(){c(!1)};return l.a.createElement("div",null,l.a.createElement(h.a,{className:"table-header"},l.a.createElement("div",{className:"title"},l.a.createElement(E.a,{variant:"h6"},"Departments")),l.a.createElement("div",{className:"spacer"},l.a.createElement("div",{className:"col-md-3 col-lg-3 col-sx-6 col-6 ml-auto"},l.a.createElement(C.a,{placeholder:"Search ...",onChange:function(e){return a=e.target.value,void se(le.filter((function(e){return e.department_name.toLowerCase().includes(a.toLowerCase())})));var a}}))),l.a.createElement("div",{className:"actions"},l.a.createElement(g.a,{title:"New Department"},l.a.createElement(f.a,{"aria-label":"New Department",onClick:function(){return Ve(null)}},l.a.createElement(j.a,null))))),J?l.a.createElement("div",{className:"flex-auto"},l.a.createElement("div",{className:"table-responsive-material"},l.a.createElement(m.a,{className:""},l.a.createElement(u.a,null,l.a.createElement(v.a,null,W.map((function(e){return l.a.createElement(o.a,{key:e.id,align:e.numeric},l.a.createElement(g.a,{title:"Sort",placement:e.numeric?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(b.a,{active:U===e.id,direction:O,onClick:(a=e.id,function(e){Fe(e,a)})},e.label)));var a})))),l.a.createElement(s.a,null,me.slice(Q*ee,Q*ee+ee).map((function(e){return l.a.createElement(v.a,{hover:!0,key:e.id,onClick:function(a){e.id},tabIndex:-1},l.a.createElement(o.a,null,e.id),l.a.createElement(o.a,null,e.customer_name),l.a.createElement(o.a,null,e.site_name),l.a.createElement(o.a,null,e.department_name),l.a.createElement(o.a,null,e.buildings_count),l.a.createElement(o.a,null,e.floors_count),l.a.createElement(o.a,null,e.rooms_count),l.a.createElement(o.a,{className:"text-right"},l.a.createElement(S,{key:e.id,selectedData:e.id,onSelectRow:Je})))}))),l.a.createElement(d.a,null,l.a.createElement(v.a,null,l.a.createElement(p.a,{count:me.length,rowsPerPage:ee,page:Q,onChangePage:function(e,a){X(a)},onChangeRowsPerPage:function(e){ae(e.target.value)}}))))),l.a.createElement(L.NotificationContainer,null)):l.a.createElement("div",{className:"loader-view",style:{height:Y>=1200?"calc(100vh - 259px)":"calc(100vh - 238px)"}},l.a.createElement(k.a,null)),l.a.createElement(x.a,{key:"department-save",className:"modal-box",toggle:Ye,isOpen:t},l.a.createElement(D.a,null,ue?"Modify Department":"Add Department",l.a.createElement(f.a,{className:"text-grey",onClick:Ye},l.a.createElement(A.a,null))),l.a.createElement("div",{className:"modal-box-content"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(T.a,{id:"custemername",select:!0,label:"Customer Name",value:Se,onChange:function(e){return Ce(e.target.value)},SelectProps:{},helperText:"Please select Customer Name",margin:"normal",fullWidth:!0},he.map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.name)})))),l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(T.a,{id:"sitename",select:!0,label:"Site Name",value:ke,onChange:function(e){return we(e.target.value)},SelectProps:{},helperText:"Please select Site Name",margin:"normal",fullWidth:!0},Ne.filter((function(e){return e.company_id==Se})).map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.site_name)})))),l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(T.a,{id:"department_name",label:"Department",value:Me,onChange:function(e){return Ae(e.target.value)},margin:"normal",helperText:"Please Enter Department",fullWidth:!0})),l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(T.a,{id:"colour",label:"Colour",multiline:!0,rowsMax:"4",value:Le,onChange:function(e){return We(e.target.value)},margin:"normal",fullWidth:!0})),l.a.createElement("div",{className:"col-md-6 col-12"},l.a.createElement(T.a,{id:"archive",select:!0,label:"Archive",value:Ue,onChange:function(e){return He(e.target.value)},SelectProps:{},helperText:"Please select Priority",margin:"normal",fullWidth:!0},[{id:0,content:"Archive"},{id:1,content:"Live"}].map((function(e){return l.a.createElement(y.a,{key:e.id,value:e.id},e.content)})))))),l.a.createElement("div",{className:"modal-box-footer d-flex flex-row"},l.a.createElement(z.a,{onClick:Ye,color:"secondary"},"Cancel"),l.a.createElement(z.a,{onClick:function(){Ye();var e=new FormData;e.append("id",ue),e.append("company_id",Se),e.append("site_id",ke),e.append("department_name",Me),e.append("colour",Le),e.append("archive",Ue),w.a.post(w.b+"department/updateDepartment",e).then((function(e){"success"===e.data.status?(L.NotificationManager.success(e.data.msg,"Success!",5e3,(function(){})),Be()):"error"===e.data.status&&L.NotificationManager.error(e.data.msg,"Error!",5e3,(function(){}))})).catch((function(e){console.log("error:",e)}))},color:"primary"},"Save"))))},R=t(467);a.default=function(e){return l.a.createElement("div",{className:"app-wrapper"},l.a.createElement(c.a,{match:e.match,title:l.a.createElement(r.a,{id:"sidebar.sites.departments"})}),l.a.createElement("div",{className:"row animated slideInUpTiny animation-duration-3"},l.a.createElement(R.a,{styleName:"col-12"},l.a.createElement(I,null))))}}}]);
//# sourceMappingURL=36.7ede8971.chunk.js.map