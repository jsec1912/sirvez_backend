(this["webpackJsonpjumbo-hooks"]=this["webpackJsonpjumbo-hooks"]||[]).push([[11],{1256:function(e,t,n){"use strict";n.r(t);var a=n(9),o=n(0),c=n.n(o),i=n(29),r=n(877),s=n(14),l=n(446),m=n(27),u=n(490),p=n.n(u),d=n(445);t.default=function(e){var t=Object(m.g)(),n=Object(o.useState)(!1),u=Object(a.a)(n,2),g=u[0],f=u[1],b=Object(s.e)((function(e){return e.settings})).width,h=Object(o.useState)(""),y=Object(a.a)(h,2),v=y[0],j=y[1],O=Object(o.useState)(""),x=Object(a.a)(O,2),S=x[0],k=x[1],w=Object(o.useState)(!1),E=Object(a.a)(w,2),_=E[0],B=E[1];return Object(o.useEffect)((function(){if(0==localStorage.getItem("isFirst")&&(localStorage.setItem("isFirst",1),t.go(0)),e.location.state.img_id&&e.location.state.img_url.indexOf("blob:http")<0)k(e.location.state.img_url);else{var n=e.location.state.img_file;k(URL.createObjectURL(n))}i.a.get(i.b+"room/editPhoto").then((function(e){"success"===e.data.status&&(f(!0),j(e.data.categories.map((function(e){return"{ name: '"+e.name+"', list: ["+e.stickers.map((function(e){return"'"+e.name+"'"}))+"], type: 'svg', thumbnailUrl: 'images/ui/"+e.category_img+"'}"}))))})).catch((function(e){B(!0),console.log("error:",e)}))}),[]),c.a.createElement("div",{className:"app-wrapper"},c.a.createElement(d.a,{variant:"contained",color:"primary",className:"jr-btn my-2",onClick:function(){return t.go(-1)}},"Go Back"),g?c.a.createElement("div",null,c.a.createElement("div",{id:"loader"}),c.a.createElement("pixie-editor",null),c.a.createElement(r.a,null,c.a.createElement("script",null,"document.getElementById('loader').style.display = 'none';\n                            var pixie = new Pixie({\n                                crossOrigin: true,\n                                image: '".concat(S,"',\n                                onLoad: function() {},\n                                ui:{\n                                    nav: {\n                                        position: 'top',\n                                        replaceDefault: true,\n                                        items: [\n                                            {type: 'separator'},\n                                            {name: 'resize', icon: 'resize-custom', action: 'resize'},\n                                            {name: 'crop', icon: 'crop-custom', action: 'crop'},\n                                            {name: 'transform', icon: 'transform-custom', action: 'rotate'},\n                                            {type: 'separator'},\n                                            {name: 'draw', icon: 'pencil-custom', action: 'draw'},\n                                            {name: 'text', icon: 'text-box-custom', action: 'text'},\n                                            {name: 'shapes', icon: 'polygon-custom', action: 'shapes'},\n                                            {name: 'stickers', icon: 'sticker-custom', action: 'stickers'},\n                                            {type: 'separator'},\n                                        ]\n                                    }\n                                },\n                                onSave: function(data, name) {\n                                    document.getElementById('loader').style.display = 'block';\n                                    localStorage.setItem('pixie_id', '").concat(e.location.state?e.location.state.img_id:"0","');\n                                    localStorage.setItem('pixie_data', data);\n                                    localStorage.setItem('pixie_room_id', '").concat(e.location.state?e.location.state.room_id:"0","');\n                                    window.history.go(-1);\n                                },\n                                tools: { \n                                    stickers: { \n                                        replaceDefault: true, \n                                        items: [ ").concat(v," ] \n                                    }, \n                                    import:{\n                                        fitOverlayToScreen: true\n                                    },\n                                    zoom:{\n                                        fitImageToScreen: true\n                                    }\n                                } \n                            });\n                            ")))):c.a.createElement("div",{className:"loader-view",style:{height:b>=1200?"calc(100vh - 259px)":"calc(100vh - 238px)"}},c.a.createElement(l.a,null)),c.a.createElement(p.a,{show:_,warning:!0,confirmBtnText:"Go Back",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Warning!",onConfirm:function(){return t.go(-1)}},"Data not cached, so you can not view this page."))}}}]);
//# sourceMappingURL=11.f9589a60.chunk.js.map