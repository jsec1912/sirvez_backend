{"version":3,"sources":["app/routes/project/routes/live/EditPhoto.js"],"names":["EditPhoto","props","History","useHistory","useState","loader","setLoader","width","useSelector","settings","category_js","setCategoryJS","img_url","setImgUrl","goback","setGoback","useEffect","localStorage","getItem","setItem","go","location","state","img_id","indexOf","file","img_file","URL","createObjectURL","$http","get","base_url","then","response","data","status","categories","map","item","name","stickers","subitem","category_img","catch","error","console","log","className","variant","color","onClick","id","room_id","style","height","show","warning","confirmBtnText","confirmBtnBsStyle","cancelBtnBsStyle","title","onConfirm"],"mappings":"2NAoIeA,UA3HG,SAACC,GACf,IAAMC,EAAUC,cADS,EAGGC,oBAAS,GAHZ,mBAGlBC,EAHkB,KAGVC,EAHU,KAIlBC,EAASC,aAAY,qBAAEC,YAAvBF,MAJkB,EAKYH,mBAAS,IALrB,mBAKlBM,EALkB,KAKLC,EALK,OAMIP,mBAAS,IANb,mBAMlBQ,EANkB,KAMTC,EANS,OAOGT,oBAAS,GAPZ,mBAOlBU,EAPkB,KAOVC,EAPU,KAwCzB,OA9BAC,qBAAU,WAKN,GAJoC,GAAjCC,aAAaC,QAAQ,aACpBD,aAAaE,QAAQ,UAAU,GAC/BjB,EAAQkB,GAAG,IAEXnB,EAAMoB,SAASC,MAAMC,QAAUtB,EAAMoB,SAASC,MAAMV,QAAQY,QAAQ,aAAe,EACnFX,EAAUZ,EAAMoB,SAASC,MAAMV,aAC5B,CACH,IAAIa,EAAOxB,EAAMoB,SAASC,MAAMI,SAChCb,EAAUc,IAAIC,gBAAgBH,IAElCI,IAAMC,IAAIC,IAAW,kBACpBC,MAAK,SAACC,GAC0B,YAAzBA,EAASC,KAAKC,SACd7B,GAAU,GACVK,EAAcsB,EAASC,KAAKE,WAAWC,KAAI,SAAAC,GACvC,MAAO,YAAcA,EAAKC,KAAO,aAC7BD,EAAKE,SAASH,KAAI,SAAAI,GACd,MAAO,IAAMA,EAAQF,KAAO,OAE9B,4CAA8CD,EAAKI,aAAe,aAGjFC,OAAM,SAACC,GACN7B,GAAU,GACV8B,QAAQC,IAAI,SAAUF,QAG3B,IAGC,yBAAKG,UAAU,eACX,kBAAC,IAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUF,UAAU,cAClDG,QAAS,kBAAMhD,EAAQkB,IAAI,KAD/B,WAIEf,EACE,6BACI,yBAAK8C,GAAG,WACR,uCACA,kBAAC,IAAD,KACI,sPAIkBvC,EAJlB,8jDA0BgDX,EAAMoB,SAASC,MAAQrB,EAAMoB,SAASC,MAAMC,OAAS,IA1BrG,0KA4BqDtB,EAAMoB,SAASC,MAAQrB,EAAMoB,SAASC,MAAM8B,QAAU,IA5B3G,8TAkC2B1C,EAlC3B,icAiDR,yBAAKqC,UAAU,cACPM,MAAO,CAACC,OAAQ/C,GAAS,KAAO,sBAAwB,wBAC5D,kBAAC,IAAD,OAIZ,kBAAC,IAAD,CAAYgD,KAAMzC,EACd0C,SAAO,EACPC,eAAe,UACfC,kBAAkB,SAClBC,iBAAiB,UACjBC,MAAM,WACNC,UAAW,kBAAM3D,EAAQkB,IAAI,KANjC","file":"static/js/11.f9589a60.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {base_url, public_url, $http} from \"config\";\nimport Helmet from 'react-helmet';\nimport {useSelector} from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {useHistory} from 'react-router-dom';\nimport SweetAlert from 'react-bootstrap-sweetalert'\nimport Button from '@material-ui/core/Button';\n\nconst EditPhoto = (props) => {\n    const History = useHistory();\n\n    const [loader, setLoader] = useState(false);\n    const {width} = useSelector(({settings}) => settings);\n    const [category_js, setCategoryJS] = useState(\"\");\n    const [img_url, setImgUrl] = useState('');\n    const [goback, setGoback] = useState(false)\n\n\n    useEffect(() => {\n        if(localStorage.getItem(\"isFirst\")==0){\n            localStorage.setItem('isFirst',1)\n            History.go(0)\n        }\n        if (props.location.state.img_id && props.location.state.img_url.indexOf('blob:http') < 0) {\n            setImgUrl(props.location.state.img_url);\n        } else {\n            var file = props.location.state.img_file;\n            setImgUrl(URL.createObjectURL(file))\n        }\n        $http.get(base_url + \"room/editPhoto\")\n        .then((response) => {\n            if (response.data.status === \"success\") {\n                setLoader(true);\n                setCategoryJS(response.data.categories.map(item => {\n                    return \"{ name: '\" + item.name + \"', list: [\" +\n                        item.stickers.map(subitem => {\n                            return \"'\" + subitem.name + \"'\";\n                        })\n                        + \"], type: 'svg', thumbnailUrl: 'images/ui/\" + item.category_img + \"'}\";\n                }));\n            }\n        }).catch((error)=>{\n            setGoback(true)\n            console.log(\"error:\", error);\n        })\n       \n    }, [])\n\n    return (\n        <div className=\"app-wrapper\">\n            <Button variant=\"contained\" color=\"primary\" className=\"jr-btn my-2\" \n                onClick={() => History.go(-1)}>\n                Go Back\n            </Button>\n            { loader ? (\n                <div>\n                    <div id=\"loader\"></div> \n                    <pixie-editor></pixie-editor>\n                    <Helmet>\n                        <script>\n                            {`document.getElementById('loader').style.display = 'none';\n                            var pixie = new Pixie({\n                                crossOrigin: true,\n                                image: '${img_url}',\n                                onLoad: function() {},\n                                ui:{\n                                    nav: {\n                                        position: 'top',\n                                        replaceDefault: true,\n                                        items: [\n                                            {type: 'separator'},\n                                            {name: 'resize', icon: 'resize-custom', action: 'resize'},\n                                            {name: 'crop', icon: 'crop-custom', action: 'crop'},\n                                            {name: 'transform', icon: 'transform-custom', action: 'rotate'},\n                                            {type: 'separator'},\n                                            {name: 'draw', icon: 'pencil-custom', action: 'draw'},\n                                            {name: 'text', icon: 'text-box-custom', action: 'text'},\n                                            {name: 'shapes', icon: 'polygon-custom', action: 'shapes'},\n                                            {name: 'stickers', icon: 'sticker-custom', action: 'stickers'},\n                                            {type: 'separator'},\n                                        ]\n                                    }\n                                },\n                                onSave: function(data, name) {\n                                    document.getElementById('loader').style.display = 'block';\n                                    localStorage.setItem('pixie_id', '${props.location.state ? props.location.state.img_id : \"0\"}');\n                                    localStorage.setItem('pixie_data', data);\n                                    localStorage.setItem('pixie_room_id', '${props.location.state ? props.location.state.room_id : \"0\"}');\n                                    window.history.go(-1);\n                                },\n                                tools: { \n                                    stickers: { \n                                        replaceDefault: true, \n                                        items: [ ${category_js} ] \n                                    }, \n                                    import:{\n                                        fitOverlayToScreen: true\n                                    },\n                                    zoom:{\n                                        fitImageToScreen: true\n                                    }\n                                } \n                            });\n                            `}\n                        </script>\n                    </Helmet>\n                </div>\n            ):(\n                <div className=\"loader-view\"\n                        style={{height: width >= 1200 ? 'calc(100vh - 259px)' : 'calc(100vh - 238px)'}}>\n                    <CircularProgress/>\n                </div>                   \n            )}\n\n        <SweetAlert show={goback}\n            warning\n            confirmBtnText=\"Go Back\"\n            confirmBtnBsStyle=\"danger\"\n            cancelBtnBsStyle=\"default\"\n            title=\"Warning!\"\n            onConfirm={() => History.go(-1)}\n        >                \n        Data not cached, so you can not view this page.\n        </SweetAlert>\n      </div>\n    );\n}\n\n\n\n\nexport default EditPhoto;"],"sourceRoot":""}