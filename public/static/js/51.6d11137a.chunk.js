(this["webpackJsonpjumbo-hooks"]=this["webpackJsonpjumbo-hooks"]||[]).push([[51],{1357:function(e,t,a){"use strict";a.r(t);var n=a(63),c=a(64),i=a(66),l=a(65),r=a(0),s=a.n(r),o=a(480),u=a(3),d=a(9),m=a(1370),f=a(1374),p=a(1373),h=a(1375),g=a(1371),b=a(1393),v=a(1372),E=a(1392),j=a(450),N=a(255),y=a(404),O=a(1391),S=a(532),_=a.n(S),C=a(851),w=a(67),P=a(14),k=a(27),x=a(446),T=a(29),M=a(1390),A=a(1376),I=a(572),L=a.n(I),W=a(467),D=a(448),R=a(445),z=a(50),B=a(490),J=a.n(B),H=[{id:"id",align:!1,disablePadding:!0,label:"ID"},{id:"site_name",align:!0,disablePadding:!1,label:"Site Name"},{id:"city",align:!0,disablePadding:!1,label:"City"},{id:"postcode",align:!0,disablePadding:!1,label:"Postcode"},{id:"buildings_count",align:!0,disablePadding:!1,label:"Buildings"},{id:"floors_count",align:!0,disablePadding:!1,label:"Floors"},{id:"rooms_count",align:!0,disablePadding:!1,label:"Rooms"},{id:"actions",align:!0,disablePadding:!1,numeric:"right",label:"Actions"}],U=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)("asc"),i=Object(d.a)(c,2),l=i[0],o=i[1],S=Object(r.useState)("id"),I=Object(d.a)(S,2),B=I[0],U=I[1],F=Object(r.useState)(!1),V=Object(d.a)(F,2),G=V[0],Y=V[1],q=Object(P.e)((function(e){return e.settings})).width,K=Object(k.g)(),Q=Object(r.useState)(0),X=Object(d.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)(10),te=Object(d.a)(ee,2),ae=te[0],ne=te[1],ce=Object(r.useState)([]),ie=Object(d.a)(ce,2),le=ie[0],re=ie[1],se=Object(r.useState)([]),oe=Object(d.a)(se,2),ue=oe[0],de=oe[1],me=Object(r.useState)(null),fe=Object(d.a)(me,2),pe=fe[0],he=fe[1],ge=Object(r.useState)([]),be=Object(d.a)(ge,2),ve=be[0],Ee=be[1],je=Object(r.useState)(null),Ne=Object(d.a)(je,2),ye=Ne[0],Oe=Ne[1],Se=Object(r.useState)(""),_e=Object(d.a)(Se,2),Ce=_e[0],we=_e[1],Pe=Object(r.useState)(""),ke=Object(d.a)(Pe,2),xe=ke[0],Te=ke[1],Me=Object(r.useState)(""),Ae=Object(d.a)(Me,2),Ie=Ae[0],Le=Ae[1],We=Object(r.useState)(""),De=Object(d.a)(We,2),Re=De[0],ze=De[1],Be=Object(r.useState)(""),Je=Object(d.a)(Be,2),He=Je[0],Ue=Je[1],Fe=Object(r.useState)(""),Ve=Object(d.a)(Fe,2),Ge=Ve[0],Ye=Ve[1],qe=Object(r.useState)(""),Ke=Object(d.a)(qe,2),Qe=Ke[0],Xe=Ke[1],Ze=Object(r.useState)(""),$e=Object(d.a)(Ze,2),et=$e[0],tt=$e[1],at=Object(r.useState)(""),nt=Object(d.a)(at,2),ct=nt[0],it=nt[1],lt=Object(r.useState)(!1),rt=Object(d.a)(lt,2),st=rt[0],ot=rt[1];Object(r.useEffect)((function(){ut()}),[]);var ut=function(){T.a.get(T.b+"site/siteList").then((function(e){re(e.data.sites),de(e.data.sites),Y(!0)})).catch((function(e){ot(!0)}))},dt=function(e,t){var a;"desc"===(a=B===t&&"asc"===l?"desc":"asc")?ue.sort((function(e,a){return a[t]<e[t]?-1:1})):ue.sort((function(e,a){return e[t]<a[t]?-1:1})),o(a),U(t)},mt=function(e){K.push({pathname:"/app/sites/mysite/Info",state:{id:e}})},ft=function(e,t){if(0===t)K.push({pathname:"/app/sites/mysite/Info",state:{id:e}});else if(1===t)pt(e);else if(2===t){var a=new FormData;a.append("id",e),T.a.post(T.b+"site/deleteSite",a).then((function(e){"success"===e.data.status?(ut(),z.NotificationManager.info("You removed selected site")):"error"===e.data.status&&z.NotificationManager.error(e.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){z.NotificationManager.error(e,"Error!",1e3,(function(){}))})),navigator.onLine||caches.open("SirvezApp").then((function(t){t.match("/api/site/siteList").then((function(e){return e?e.json():null})).then((function(a){if(null!=a){a.sites=a.sites.filter((function(t){return t.id!==e}));var n=new Response(JSON.stringify(a),{headers:{"content-type":"application/json"}});t.put("/api/site/siteList",n.clone()).then((function(){ut()}))}}))}))}},pt=function(e){he(e),T.a.get(T.b+"site/getSiteInfo",{params:{id:e}}).then((function(t){Ee(t.data.customers),e&&(Oe(t.data.site.company_id),we(t.data.site.site_name),Te(t.data.site.address),Le(t.data.site.city),ze(t.data.site.postcode),Ue(t.data.site.contact_name),Ye(t.data.site.contact_number),Xe(t.data.site.site_instructions),tt(t.data.site.access_hour),it(t.data.site.comment)),n(!0)})).catch((function(e){ot(!0)}))},ht=function(){n(!1)};return s.a.createElement("div",null,s.a.createElement(j.a,{className:"table-header"},s.a.createElement("div",{className:"title"},s.a.createElement(N.a,{variant:"h6"},"Sites")),s.a.createElement("div",{className:"col-md-3 col-lg-3 col-sx-6 col-6 ml-auto"},s.a.createElement(w.a,{placeholder:"Search ...",onChange:function(e){return t=e.target.value,void de(le.filter((function(e){return e.site_name.toLowerCase().includes(t.toLowerCase())})));var t}})),s.a.createElement("div",{className:"actions"},s.a.createElement(O.a,{title:"New Site"},s.a.createElement(y.a,{"aria-label":"New Site",onClick:function(){return pt(null)}},s.a.createElement(_.a,null))))),G?s.a.createElement("div",{className:"flex-auto"},s.a.createElement("div",{className:"table-responsive-material"},s.a.createElement(m.a,{className:""},s.a.createElement(g.a,null,s.a.createElement(v.a,null,H.map((function(e){return s.a.createElement(p.a,{key:e.id,align:e.numeric},s.a.createElement(O.a,{title:"Sort",placement:e.numeric?"bottom-end":"bottom-start",enterDelay:300},s.a.createElement(E.a,{active:B===e.id,direction:l,onClick:(t=e.id,function(e){dt(e,t)})},e.label)));var t})))),s.a.createElement(f.a,null,ue.length>0?ue.slice(Z*ae,Z*ae+ae).map((function(e){return s.a.createElement(v.a,{hover:!0,key:e.id,tabIndex:-1},s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.id),s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.site_name),s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.city),s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.postcode),s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.buildings_count),s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.floors_count),s.a.createElement(p.a,{onClick:function(){return mt(e.id)}},e.rooms_count),s.a.createElement(p.a,{className:"text-right"},s.a.createElement(C.a,{key:e.id,selectedData:e.id,onSelectRow:ft})))})):s.a.createElement("tr",null,s.a.createElement("td",{className:"text-danger",colSpan:"8"},s.a.createElement(u.a,{id:"table.noData"})))),s.a.createElement(h.a,null,s.a.createElement(v.a,null,s.a.createElement(b.a,{count:ue.length,rowsPerPage:ae,page:Z,onChangePage:function(e,t){$(t)},onChangeRowsPerPage:function(e){ne(e.target.value)}}))))),s.a.createElement(z.NotificationContainer,null)):s.a.createElement("div",{className:"loader-view",style:{height:q>=1200?"calc(100vh - 259px)":"calc(100vh - 238px)"}},s.a.createElement(x.a,null)),s.a.createElement(M.a,{key:"site-save",className:"modal-box",toggle:ht,isOpen:a},s.a.createElement(A.a,null,pe?"Modify Site":"Add Site",s.a.createElement(y.a,{className:"text-grey",onClick:ht},s.a.createElement(L.a,null))),s.a.createElement("div",{className:"modal-box-content"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"custemername",select:!0,label:"Customer Name",value:ye,onChange:function(e){return Oe(e.target.value)},SelectProps:{},helperText:"Please select Customer Name",margin:"normal",fullWidth:!0},ve.map((function(e){return s.a.createElement(D.a,{key:e.id,value:e.id},e.name)})))),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"site_name",label:"Site",value:Ce,onChange:function(e){return we(e.target.value)},margin:"normal",helperText:"Please Enter Site",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"address",label:"Address",value:xe,onChange:function(e){return Te(e.target.value)},margin:"normal",helperText:"Please Enter Address",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"site_city",label:"City",value:Ie,onChange:function(e){return Le(e.target.value)},margin:"normal",helperText:"Please Enter City",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"site_postcode",label:"Postcode",value:Re,onChange:function(e){return ze(e.target.value)},margin:"normal",helperText:"Please Enter Postcode",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"site_contact_name",label:"Site Contact Name",value:He,onChange:function(e){return Ue(e.target.value)},margin:"normal",helperText:"Please Enter Site Contact Name",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"out_contact",label:"Out of ours contact number",value:Ge,onChange:function(e){return Ye(e.target.value)},margin:"normal",helperText:"Please Enter Out of ours contact number",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"any_site",label:"Any site instructions",value:Qe,onChange:function(e){return Xe(e.target.value)},margin:"normal",helperText:"Please Enter Any site instructions",fullWidth:!0})),s.a.createElement("div",{className:"col-md-6 col-12"},s.a.createElement(W.a,{id:"hours_access",label:"Hours of access",value:et,onChange:function(e){return tt(e.target.value)},margin:"normal",helperText:"Please Enter Hours of access",fullWidth:!0})),s.a.createElement("div",{className:"col-md-12 col-12"},s.a.createElement(W.a,{id:"site_comment",label:"Comments",multiline:!0,rowsMax:"4",value:ct,onChange:function(e){return it(e.target.value)},margin:"normal",fullWidth:!0})))),s.a.createElement("div",{className:"modal-box-footer d-flex flex-row jr-featured-content-right"},s.a.createElement(R.a,{onClick:ht,color:"secondary",variant:"contained",className:"jr-btn text-white"},"Cancel"),s.a.createElement(R.a,{onClick:function(){ht();var e=pe||JSON.parse(localStorage.getItem("user")).id+"_"+(new Date).getTime(),t=new FormData;t.append("id",e),t.append("customer_id",ye),t.append("site_name",Ce),t.append("address",xe),t.append("city",Ie),t.append("postcode",Re),t.append("contact_name",He),t.append("contact_number",Ge),t.append("site_instructions",Qe),t.append("access_hour",et),t.append("comment",ct),T.a.post(T.b+"site/updateSite",t).then((function(e){"success"===e.data.status?(z.NotificationManager.success("Updated site!","Success!",1e3,(function(){})),navigator.onLine&&ut()):"error"===e.data.status&&z.NotificationManager.error(e.data.msg,"Error!",1e3,(function(){}))})).catch((function(e){z.NotificationManager.error(e,"Error!",1e3,(function(){}))})),navigator.onLine||caches.open("SirvezApp").then((function(t){var a={id:e,customer_id:ye,site_name:Ce,address:xe,city:Ie,postcode:Re,contact_name:He,contact_number:Ge,site_instructions:Qe,access_hour:et,comment:ct,buildings_count:0,floors_count:0,rooms_count:0};t.match("/api/site/getSiteInfo").then((function(e){return e?e.json():null})).then((function(n){if(null!=n){n.site=a;var c=new Response(JSON.stringify(n),{headers:{"content-type":"application/json"}});t.put("/api/site/getSiteInfo?id="+e,c.clone())}})),t.match("/api/site/siteInfo?id="+e).then((function(e){return e?e.json():null})).then((function(n){if(null==n){n={site:a,status:"success",buildings:[]};var c=new Response(JSON.stringify(n),{headers:{"content-type":"application/json"}});t.put("/api/site/siteInfo?id="+e,c.clone())}else{n.site=a;var i=new Response(JSON.stringify(n),{headers:{"content-type":"application/json"}});t.put("/api/site/siteInfo?id="+e,i.clone())}})),t.match("/api/site/siteList").then((function(e){return e?e.json():null})).then((function(n){if(null!=n){var c=n.sites.find((function(t){return t.id===e}));c?(c.id=e,c.customer_id=ye,c.site_name=Ce,c.city=Ie,c.postcode=Re,c.contact_name=He,c.contact_number=Ge,c.site_instructions=Qe,c.access_hour=et,c.comment=ct):n.sites.unshift(a);var i=new Response(JSON.stringify(n),{headers:{"content-type":"application/json"}});t.put("/api/site/siteList",i.clone()).then((function(){ut()}))}}))}))},color:"primary",variant:"contained",className:"jr-btn text-white"},"Save"))),s.a.createElement(J.a,{show:st,warning:!0,confirmBtnText:"Go Back",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",title:"Warning!",onConfirm:function(){return K.go(-1)}},"Data not cached, so you can not view this page."))},F=a(487),V=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"app-wrapper"},s.a.createElement(o.a,{match:this.props.match,title:s.a.createElement(u.a,{id:"sidebar.sites"})}),s.a.createElement("div",{className:"row animated slideInUpTiny animation-duration-3"},s.a.createElement(F.a,{styleName:"col-12"},s.a.createElement(U,null))))}}]),a}(s.a.Component);t.default=V},480:function(e,t,a){"use strict";var n=a(0),c=a.n(n),i=a(529),l=a(530),r=function(e,t,a){return 0===a?"/":"/"+e.split(t)[0]+t};t.a=function(e){var t=e.title,a=e.match,n=e.project_name,s=e.room_number,o=[],u=a.url.substr(1),d=u.split("/");return d.map((function(e,t){""===e&&d.splice(t,1),"live"===d[t-1]?o[t]=n||"":"live"===d[t-2]?o[t]=s||"":o[t]=e})),c.a.createElement("div",{className:"page-heading d-sm-flex justify-content-sm-between align-items-sm-center"},c.a.createElement("h2",{className:"title mb-3 mb-sm-0"},t),c.a.createElement(i.a,{className:"mb-0",tag:"nav"},d.map((function(e,t){if(0!=t)return c.a.createElement(l.a,{active:d.length===t+1,tag:d.length===t+1?"span":"a",key:t,href:r(u,e,t)},function(e){var t=e.split("-");return t.length>1?t[0].charAt(0).toUpperCase()+t[0].slice(1)+" "+t[1].charAt(0).toUpperCase()+t[1].slice(1):e.charAt(0).toUpperCase()+e.slice(1)}(o[t]))}))))}},487:function(e,t,a){"use strict";var n=a(0),c=a.n(n),i=function(e){var t=e.heading,a=e.children,n=e.styleName,i=e.cardStyle,l=e.childrenStyle,r=e.headerOutside,s=e.headingStyle;return c.a.createElement("div",{className:"".concat(n)},r&&c.a.createElement("div",{className:"jr-entry-header"},c.a.createElement("h3",{className:"entry-heading"},t),a.length>1&&c.a.createElement("div",{className:"entry-description"},a[0])),c.a.createElement("div",{className:"jr-card ".concat(i)},!r&&t&&c.a.createElement("div",{className:"jr-card-header ".concat(s)},c.a.createElement("h3",{className:"card-heading"},t),a.length>1&&c.a.createElement("div",{className:"sub-heading"},a[0])),c.a.createElement("div",{className:"jr-card-body ".concat(l)},a.length>1?a[1]:a)))};t.a=i,i.defaultProps={cardStyle:"",headingStyle:"",childrenStyle:"",styleName:"col-lg-6 col-sm-12"}},532:function(e,t,a){"use strict";var n=a(41);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=n(a(0)),i=(0,n(a(173)).default)(c.default.createElement("path",{d:"M14 10H2v2h12v-2zm0-4H2v2h12V6zm4 8v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM2 16h8v-2H2v2z"}),"PlaylistAdd");t.default=i},851:function(e,t,a){"use strict";var n=a(9),c=a(0),i=a.n(c),l=a(252),r=a(448),s=a(404);t.a=function(e){var t=Object(c.useState)(!1),a=Object(n.a)(t,2),o=a[0],u=a[1],d=Object(c.useState)(void 0),m=Object(n.a)(d,2),f=m[0],p=m[1],h=e.selectedData,g=e.onSelectRow,b=e.menu_rows,v=b||[{content:"View",id:0},{content:"Modify",id:1},{content:"Delete",id:2}],E=function(){u(!1)};return i.a.createElement("div",null,i.a.createElement(s.a,{onClick:function(e){u(!0),p(e.currentTarget)}},i.a.createElement("i",{className:"zmdi zmdi-more-vert"})),i.a.createElement(l.a,{anchorEl:f,open:o,onClose:E,key:h.id,MenuListProps:{style:{width:150,paddingTop:0,paddingBottom:0}}},v.map((function(e){return i.a.createElement(r.a,{key:h+"-"+e.content,onClick:function(){E(),g(h,e.id)}},e.content)}))))}}}]);
//# sourceMappingURL=51.6d11137a.chunk.js.map